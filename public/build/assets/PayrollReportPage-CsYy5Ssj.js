import{r as n,j as a,L as g}from"./app-yxEi3xJe.js";import{S,C as y,B as C,a as v,X as b,Y as L,b as _,h as w,f as A,g as D}from"./scroll-area-BpRhE63i.js";import{S as d,a as m,b as x,c as j,d as c}from"./select-BnEmntSq.js";import{A as N}from"./app-layout-BmWLcPuv.js";import"./app-logo-icon-CXNx6eOd.js";import"./index-BcpDV_59.js";function T({payrolls:i}){const[r,p]=n.useState("net_salary"),[s,h]=n.useState(new Date().getFullYear()),o=n.useMemo(()=>Array.from(new Set(i.map(t=>t.period_year))).sort((t,l)=>l-t),[i]);n.useEffect(()=>{!o.includes(s)&&o.length>0&&h(o[0])},[o,s]);const u=n.useMemo(()=>{const e=Array.from({length:12},(t,l)=>({month:new Date(s,l).toLocaleString("id-ID",{month:"long"}),total:0}));return i.filter(t=>t.period_year===s).forEach(t=>{const l=t.period_month-1;e[l].total+=t[r]}),e},[i,s,r]),f=n.useMemo(()=>({total:{label:r==="net_salary"?"Gaji Bersih":"Gaji Kotor",color:r==="net_salary"?"#2563eb":"#60a5fa"}}),[r]);return a.jsxs(N,{breadcrumbs:[{title:"Laporan Penggajian",href:"/"}],children:[a.jsx(g,{title:"Laporan Penggajian"}),a.jsxs("div",{className:"space-y-4 p-4",children:[a.jsxs("div",{className:"flex gap-4",children:[a.jsxs(d,{value:r,onValueChange:e=>p(e),children:[a.jsx(m,{className:"w-[200px]",children:a.jsx(x,{placeholder:"Pilih Jenis Gaji"})}),a.jsxs(j,{children:[a.jsx(c,{value:"net_salary",children:"Gaji Bersih"}),a.jsx(c,{value:"gross_salary",children:"Gaji Kotor"})]})]}),a.jsxs(d,{value:s.toString(),onValueChange:e=>h(parseInt(e)),children:[a.jsx(m,{className:"w-[200px]",children:a.jsx(x,{children:s})}),a.jsx(j,{children:o.map(e=>a.jsx(c,{value:e.toString(),children:e},e))})]})]}),a.jsxs(S,{className:"pb-4",children:[a.jsx(y,{config:f,className:"min-h-[80vh] sm:min-h-auto",children:a.jsxs(C,{data:u,children:[a.jsx(v,{vertical:!1,strokeDasharray:"5 5"}),a.jsx(b,{dataKey:"month",tickLine:!1,axisLine:!1,tickFormatter:e=>e.slice(0,3)}),a.jsx(L,{axisLine:!1,tickCount:7,tickFormatter:e=>`${new Intl.NumberFormat("id-ID").format(e)}`,padding:{top:20},width:80}),a.jsx(_,{content:a.jsx(w,{})}),a.jsx(A,{dataKey:"total",fill:"var(--color-total)",radius:[8,8,0,0],barSize:50})]})}),a.jsx(D,{orientation:"horizontal"})]})]})]})}export{T as default};
