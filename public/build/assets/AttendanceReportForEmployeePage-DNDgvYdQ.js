import{r as c,j as e,L as f}from"./app-yxEi3xJe.js";import{S as x,C as j,B as p,a as g,X as v,Y as k,b as C,c as S,d as b,e as y,f as n,g as L}from"./scroll-area-BpRhE63i.js";import{S as D,a as w,b as A,c as Y,d as F}from"./select-BnEmntSq.js";import{A as E}from"./app-layout-BmWLcPuv.js";import"./app-logo-icon-CXNx6eOd.js";import"./index-BcpDV_59.js";function H({attendances:r}){const i=c.useMemo(()=>{const a=new Set;return r.forEach(l=>{const t=new Date(l.date).getFullYear();a.add(t)}),Array.from(a).sort((l,t)=>t-l)},[r]),[o,d]=c.useState(()=>{const a=new Date().getFullYear();return i.includes(a)?a:i[0]||a}),h=c.useMemo(()=>{const a=Array.from({length:12},(t,s)=>({month:new Date(o,s).toLocaleString("id-ID",{month:"long"}),finished:0,overtime:0,leave:0,sick:0}));return r.filter(t=>new Date(t.date).getFullYear()===o).forEach(t=>{const s=new Date(t.date).getMonth();if(t.status==="finished"){if(a[s].finished+=1,t.clock_in&&t.clock_out){const u=new Date(`${t.date}T${t.clock_in}`);(new Date(`${t.date}T${t.clock_out}`).getTime()-u.getTime())/(1e3*60*60)>8.5&&(a[s].overtime+=1)}}else t.status==="leave"?a[s].leave+=1:t.status==="sick"&&(a[s].sick+=1)}),a},[o,r]),m={finished:{label:"Hadir",color:"#3B82F6"},overtime:{label:"Lembur",color:"#10B981"},leave:{label:"Libur Cuti",color:"#F43F5E"},sick:{label:"Libur Sakit",color:"#D946EF"}};return e.jsxs(E,{breadcrumbs:[{title:"Laporan Presensi",href:"/"}],children:[e.jsx(f,{title:"Laporan Presensi"}),e.jsxs("div",{className:"m-4 space-y-4",children:[e.jsx("div",{className:"flex flex-wrap gap-4",children:e.jsx("div",{className:"w-full md:w-auto",children:i.length>0&&e.jsxs(D,{value:String(o),onValueChange:a=>d(Number(a)),children:[e.jsx(w,{children:e.jsx(A,{placeholder:"Pilih tahun"})}),e.jsx(Y,{children:i.map(a=>e.jsx(F,{value:String(a),children:a},a))})]})})}),e.jsxs(x,{className:"pb-4",children:[e.jsx(j,{config:m,className:"min-h-[78vh] sm:min-h-auto",children:e.jsxs(p,{data:h,children:[e.jsx(g,{vertical:!1,strokeDasharray:"5 5"}),e.jsx(v,{dataKey:"month",axisLine:!1,tickFormatter:a=>a.slice(0,3)}),e.jsx(k,{axisLine:!1,tickCount:7,tickFormatter:a=>`${a} hari`,padding:{top:20}}),e.jsx(C,{content:e.jsx(S,{})}),e.jsx(b,{content:e.jsx(y,{})}),e.jsx(n,{dataKey:"finished",fill:"var(--color-finished)",radius:[8,8,0,0]}),e.jsx(n,{dataKey:"overtime",fill:"var(--color-overtime)",radius:[8,8,0,0]}),e.jsx(n,{dataKey:"leave",fill:"var(--color-leave)",radius:[8,8,0,0]}),e.jsx(n,{dataKey:"sick",fill:"var(--color-sick)",radius:[8,8,0,0]})]})}),e.jsx(L,{orientation:"horizontal"})]})]})]})}export{H as default};
