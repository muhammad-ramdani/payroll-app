import{K as x,r as m,j as a,L as v}from"./app-yxEi3xJe.js";import{u as S,f as k,g as D}from"./index-CgUmL9e7.js";import{B as W}from"./badge-D-KVUJFH.js";import{B as T}from"./app-logo-icon-CXNx6eOd.js";import{b,a as h,c as g,d as H,P as N,e as C,f as A,C as K,g as E,h as J}from"./popover-92tg1PKA.js";import{T as R,a as F,b as f,c as _,d as L,e as w}from"./table-DtoZaXGU.js";import{A as B}from"./app-layout-BmWLcPuv.js";const V={lessThanXSeconds:{one:"kurang dari 1 detik",other:"kurang dari {{count}} detik"},xSeconds:{one:"1 detik",other:"{{count}} detik"},halfAMinute:"setengah menit",lessThanXMinutes:{one:"kurang dari 1 menit",other:"kurang dari {{count}} menit"},xMinutes:{one:"1 menit",other:"{{count}} menit"},aboutXHours:{one:"sekitar 1 jam",other:"sekitar {{count}} jam"},xHours:{one:"1 jam",other:"{{count}} jam"},xDays:{one:"1 hari",other:"{{count}} hari"},aboutXWeeks:{one:"sekitar 1 minggu",other:"sekitar {{count}} minggu"},xWeeks:{one:"1 minggu",other:"{{count}} minggu"},aboutXMonths:{one:"sekitar 1 bulan",other:"sekitar {{count}} bulan"},xMonths:{one:"1 bulan",other:"{{count}} bulan"},aboutXYears:{one:"sekitar 1 tahun",other:"sekitar {{count}} tahun"},xYears:{one:"1 tahun",other:"{{count}} tahun"},overXYears:{one:"lebih dari 1 tahun",other:"lebih dari {{count}} tahun"},almostXYears:{one:"hampir 1 tahun",other:"hampir {{count}} tahun"}},X=(t,s,i)=>{let n;const l=V[t];return typeof l=="string"?n=l:s===1?n=l.one:n=l.other.replace("{{count}}",s.toString()),i!=null&&i.addSuffix?i.comparison&&i.comparison>0?"dalam waktu "+n:n+" yang lalu":n},O={full:"EEEE, d MMMM yyyy",long:"d MMMM yyyy",medium:"d MMM yyyy",short:"d/M/yyyy"},$={full:"HH.mm.ss",long:"HH.mm.ss",medium:"HH.mm",short:"HH.mm"},I={full:"{{date}} 'pukul' {{time}}",long:"{{date}} 'pukul' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Y={date:b({formats:O,defaultWidth:"full"}),time:b({formats:$,defaultWidth:"full"}),dateTime:b({formats:I,defaultWidth:"full"})},q={lastWeek:"eeee 'lalu pukul' p",yesterday:"'Kemarin pukul' p",today:"'Hari ini pukul' p",tomorrow:"'Besok pukul' p",nextWeek:"eeee 'pukul' p",other:"P"},z=(t,s,i,n)=>q[t],Q={narrow:["SM","M"],abbreviated:["SM","M"],wide:["Sebelum Masehi","Masehi"]},Z={narrow:["1","2","3","4"],abbreviated:["K1","K2","K3","K4"],wide:["Kuartal ke-1","Kuartal ke-2","Kuartal ke-3","Kuartal ke-4"]},G={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agt","Sep","Okt","Nov","Des"],wide:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]},U={narrow:["M","S","S","R","K","J","S"],short:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],abbreviated:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],wide:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]},ee={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},ae={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},te=(t,s)=>"ke-"+Number(t),ne={ordinalNumber:te,era:h({values:Q,defaultWidth:"wide"}),quarter:h({values:Z,defaultWidth:"wide",argumentCallback:t=>t-1}),month:h({values:G,defaultWidth:"wide"}),day:h({values:U,defaultWidth:"wide"}),dayPeriod:h({values:ee,defaultWidth:"wide",formattingValues:ae,defaultFormattingWidth:"wide"})},re=/^ke-(\d+)?/i,ie=/\d+/i,se={narrow:/^(sm|m)/i,abbreviated:/^(s\.?\s?m\.?|s\.?\s?e\.?\s?u\.?|m\.?|e\.?\s?u\.?)/i,wide:/^(sebelum masehi|sebelum era umum|masehi|era umum)/i},oe={any:[/^s/i,/^(m|e)/i]},le={narrow:/^[1234]/i,abbreviated:/^K-?\s[1234]/i,wide:/^Kuartal ke-?\s?[1234]/i},me={any:[/1/i,/2/i,/3/i,/4/i]},ue={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|mei|jun|jul|agt|sep|okt|nov|des)/i,wide:/^(januari|februari|maret|april|mei|juni|juli|agustus|september|oktober|november|desember)/i},de={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^ma/i,/^ap/i,/^me/i,/^jun/i,/^jul/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},ce={narrow:/^[srkjm]/i,short:/^(min|sen|sel|rab|kam|jum|sab)/i,abbreviated:/^(min|sen|sel|rab|kam|jum|sab)/i,wide:/^(minggu|senin|selasa|rabu|kamis|jumat|sabtu)/i},he={narrow:[/^m/i,/^s/i,/^s/i,/^r/i,/^k/i,/^j/i,/^s/i],any:[/^m/i,/^sen/i,/^sel/i,/^r/i,/^k/i,/^j/i,/^sa/i]},ge={narrow:/^(a|p|tengah m|tengah h|(di(\swaktu)?) (pagi|siang|sore|malam))/i,any:/^([ap]\.?\s?m\.?|tengah malam|tengah hari|(di(\swaktu)?) (pagi|siang|sore|malam))/i},be={any:{am:/^a/i,pm:/^pm/i,midnight:/^tengah m/i,noon:/^tengah h/i,morning:/pagi/i,afternoon:/siang/i,evening:/sore/i,night:/malam/i}},fe={ordinalNumber:H({matchPattern:re,parsePattern:ie,valueCallback:t=>parseInt(t,10)}),era:g({matchPatterns:se,defaultMatchWidth:"wide",parsePatterns:oe,defaultParseWidth:"any"}),quarter:g({matchPatterns:le,defaultMatchWidth:"wide",parsePatterns:me,defaultParseWidth:"any",valueCallback:t=>t+1}),month:g({matchPatterns:ue,defaultMatchWidth:"wide",parsePatterns:de,defaultParseWidth:"any"}),day:g({matchPatterns:ce,defaultMatchWidth:"wide",parsePatterns:he,defaultParseWidth:"any"}),dayPeriod:g({matchPatterns:ge,defaultMatchWidth:"any",parsePatterns:be,defaultParseWidth:"any"})},pe={code:"id",formatDistance:X,formatLong:Y,formatRelative:z,localize:ne,match:fe,options:{weekStartsOn:1,firstWeekContainsDate:1}},Me={not_started:["Belum Hadir","text-amber-500 bg-amber-500/10"],working:["Sedang Bekerja","text-emerald-500 bg-emerald-500/10"],finished:["Sudah Pulang","text-blue-500 bg-blue-500/10"],leave:["Libur Cuti","text-rose-500 bg-rose-500/10"],sick:["Libur Sakit","text-fuchsia-500 bg-fuchsia-500/10"]},ke=({status:t})=>{const[s,i]=Me[t];return a.jsx(W,{className:i,children:s})},we=(t,s,i=Date.now())=>{if(!t)return"-";const n=o=>{const[y,P,j]=o.split(":").map(Number),M=new Date(i);return M.setHours(y,P,j),M},l=n(t),d=(s?n(s):new Date(i)).getTime()-l.getTime(),u=o=>String(o).padStart(2,"0"),c=Math.floor(d/36e5),e=Math.floor(d%36e5/6e4),r=Math.floor(d%6e4/1e3);return`${u(c)}:${u(e)}:${u(r)}`};function We(){const{props:{monitoring_attendances:t}}=x(),[s,i]=m.useState(Date.now()),[n,l]=m.useState(),p=m.useMemo(()=>{const e=new Set;return t.forEach(r=>{const o=new Date(r.date);o.setHours(0,0,0,0),e.add(o.getTime())}),e},[t]),d=m.useMemo(()=>{if(!n)return[];const e=n.getTime();return t.filter(r=>{const o=new Date(r.date);return o.setHours(0,0,0,0),o.getTime()===e})},[t,n]),u=m.useMemo(()=>[{header:"Nama",cell:({row:e})=>a.jsx("span",{children:e.original.user.name})},{header:"Shift",cell:({row:e})=>a.jsx("span",{className:`${e.original.shift_type==="Pagi"?"text-blue-500":"text-yellow-500"}`,children:e.original.shift_type})},{header:"Jam Masuk",cell:({row:e})=>a.jsx("span",{children:e.original.clock_in??"-"})},{header:"Jam Pulang",cell:({row:e})=>a.jsx("span",{children:e.original.clock_out??"-"})},{header:"Waktu Kerja",cell:({row:e})=>we(e.original.clock_in,e.original.clock_out,s)},{header:"Status",cell:({row:e})=>a.jsx(ke,{status:e.original.status})}],[s]),c=S({data:d,columns:u,getCoreRowModel:D()});return m.useEffect(()=>{const e=new Date;e.setHours(0,0,0,0),l(e)},[]),m.useEffect(()=>{const e=setInterval(()=>i(Date.now()),1e3);return()=>clearInterval(e)},[]),a.jsxs(B,{breadcrumbs:[{title:"Monitoring Presensi",href:"/"}],children:[a.jsx(v,{title:"Monitoring Presensi"}),a.jsxs("div",{className:"overflow-x-auto p-4",children:[a.jsx("div",{className:"mb-4 flex",children:a.jsxs(N,{children:[a.jsx(C,{asChild:!0,children:a.jsxs(T,{variant:"outline",className:"mr-auto w-auto font-normal",children:[a.jsx(K,{className:"mr-2 h-4 w-4"}),n&&A(n,"EEEE, dd MMMM yyyy",{locale:pe})]})}),a.jsx(E,{className:"w-auto p-0",align:"start",children:a.jsx(J,{mode:"single",selected:n,onSelect:l,disabled:e=>{const r=new Date(e).setHours(0,0,0,0);return!(r===new Date().setHours(0,0,0,0))&&!p.has(r)}})})]})}),a.jsx("div",{className:"rounded-md border",children:a.jsxs(R,{children:[a.jsx(F,{children:c.getHeaderGroups().map(e=>a.jsx(f,{children:e.headers.map(r=>a.jsx(_,{children:k(r.column.columnDef.header,r.getContext())},r.id))},e.id))}),a.jsx(L,{children:c.getRowModel().rows.length>0?c.getRowModel().rows.map(e=>a.jsx(f,{children:e.getVisibleCells().map(r=>a.jsx(w,{children:k(r.column.columnDef.cell,r.getContext())},r.id))},e.id)):a.jsx(f,{children:a.jsx(w,{colSpan:u.length,className:"text-muted-foreground h-24 text-center",children:"Presensi baru akan tersedia pukul 06:30 pagi."})})})]})})]})]})}export{We as default};
