import{r,j as e,S as L,L as k}from"./app-yxEi3xJe.js";import{B as o}from"./badge-D-KVUJFH.js";import{B as R}from"./app-logo-icon-CXNx6eOd.js";import{D as I,a as P,b as B,c as G,d as C,e as h,t as M,A as v}from"./app-layout-BmWLcPuv.js";import{E as A,U as K}from"./modal-CJuobXsJ.js";import{S as H,a as J,b as E,c as W,d as U}from"./select-BnEmntSq.js";import{T as g,a as V,b as n,c as Y,d as b,e as t}from"./table-DtoZaXGU.js";import{u as O,f as y,g as $}from"./index-CgUmL9e7.js";import"./index-BcpDV_59.js";const m={uncalculated:["Belum Dihitung","bg-neutral-500/10 text-natural-500"],unpaid:["Belum Dibayar","bg-amber-500/10 text-amber-500"],paid_transfer:["Sudah Dibayar Transfer","bg-emerald-500/10 text-emerald-500"],paid_cash:["Sudah Dibayar Tunai","bg-emerald-500/10 text-emerald-500"]},p={blank:["-","bg-transparent dark:text-white text-black"],pending_confirmation:["Menunggu Konfirmasi","bg-amber-500/10 text-amber-500"],received:["Gaji Sudah Diterima","bg-emerald-500/10 text-emerald-500"]};function le({payrolls:c}){const[a,_]=r.useState(null),[S,u]=r.useState(!1),d=[...new Set(c.map(s=>s.period_year))].sort((s,l)=>l-s),[x,N]=r.useState(Math.max(...d)),D=r.useMemo(()=>c.filter(s=>s.period_year===x),[c,x]),w=r.useMemo(()=>[{header:"Bulan",cell:({row:s})=>new Date(0,s.original.period_month-1).toLocaleDateString("id-ID",{month:"long"})},{header:"Gaji Bersih",cell:({row:s})=>s.original.net_salary?e.jsxs("span",{className:"text-nowrap",children:["Rp ",s.original.net_salary.toLocaleString("id-ID")]}):"-"},{header:"Status Gaji",cell:({row:s})=>{const[l,i]=m[s.original.salary_status];return e.jsx(o,{className:i,children:l})}},{header:"Konfirmasi Terima Gaji",cell:({row:s})=>{const[l,i]=p[s.original.confirmation_status];return e.jsx(o,{className:i,children:l})}},{header:"Aksi",cell:({row:s})=>{const{confirmation_status:l,id:i}=s.original;return l!=="blank"&&e.jsxs(I,{children:[e.jsx(P,{asChild:!0,children:e.jsx(R,{variant:"ghost",size:"icon",children:e.jsx(A,{})})}),e.jsxs(B,{align:"end",children:[e.jsx(G,{children:"Aksi"}),e.jsx(C,{}),e.jsx(h,{onClick:()=>T(s.original),children:"Lihat Detail Gaji"}),l==="pending_confirmation"&&e.jsx(h,{onClick:()=>f(i),children:"Sudah Terima Gaji"}),e.jsx(h,{onClick:()=>window.open(`/penggajian/pdf/${i}`,"_blank"),hidden:s.original.confirmation_status!=="received",children:"Cetak Slip Gaji"})]})]})}}],[]),T=s=>{_(s),u(!0)},f=s=>L.patch(`/penggajian/confirmation/${s}`,{confirmation_status:"received"},{onSuccess:()=>M.success("Berhasil konfirmasi sudah terima gaji",{action:{label:"Tutup",onClick:()=>{}}})}),j=O({data:D,columns:w,getCoreRowModel:$()});return e.jsxs(v,{breadcrumbs:[{title:"Penggajian",href:"/"}],children:[e.jsx(k,{title:"Penggajian"}),e.jsxs("div",{className:"space-y-4 px-4 pt-4",children:[d.length>0&&e.jsxs(H,{value:x.toString(),onValueChange:s=>N(Number(s)),children:[e.jsx(J,{className:"w-[180px]",children:e.jsx(E,{})}),e.jsx(W,{children:d.map(s=>e.jsx(U,{value:s.toString(),children:s},s))})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(g,{children:[e.jsx(V,{children:j.getHeaderGroups().map(s=>e.jsx(n,{children:s.headers.map(l=>e.jsx(Y,{children:y(l.column.columnDef.header,l.getContext())},l.id))},s.id))}),e.jsx(b,{children:j.getRowModel().rows.length>0?j.getRowModel().rows.map(s=>e.jsx(n,{children:s.getVisibleCells().map(l=>e.jsx(t,{children:y(l.column.columnDef.cell,l.getContext())},l.id))},s.id)):e.jsx(n,{children:e.jsx(t,{colSpan:100,className:"text-muted-foreground h-24 text-center",children:"Data penggajian belum tersedia"})})})]})})]}),e.jsxs("div",{className:"text-muted-foreground mx-4 mt-8 mb-4 space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold",children:"Catatan:"}),e.jsxs("ul",{className:"ml-5 list-disc space-y-1 text-sm",children:[e.jsx("li",{children:"Anda baru bisa melihat detail gaji jika statusnya sudah 'Sudah Dibayar'."}),e.jsx("li",{children:"Anda baru bisa mencetak slip gaji setelah mengonfirmasi 'Saya Sudah Terima Gaji'."})]})]}),e.jsx(K,{open:S,onClose:()=>u(!1),title:"Detail Data Gaji",children:a&&e.jsx(g,{children:e.jsxs(b,{children:[e.jsxs(n,{children:[e.jsx(t,{children:"Bulan & Tahun"}),e.jsx(t,{children:":"}),e.jsxs(t,{children:[new Date(a.period_year,a.period_month-1).toLocaleString("id-ID",{month:"long"}),", ",a.period_year]})]}),e.jsxs(n,{children:[e.jsx(t,{children:"Total Gaji Pokok"}),e.jsx(t,{children:":"}),e.jsxs(t,{className:"text-sm/7",children:[e.jsx("span",{className:"text-red-500",children:"("}),"Total Kehadiran",e.jsx("span",{className:"text-yellow-500",children:" + "}),"Jatah Libur",e.jsx("span",{className:"text-red-500",children:")"}),e.jsx("span",{className:"text-yellow-500",children:" × "}),"Gaji Pokok Harian",e.jsx("br",{}),e.jsx("span",{className:"text-red-500",children:"("}),a.total_attendance_days," hari",e.jsx("span",{className:"text-yellow-500",children:" + "}),a.paid_holidays," hari",e.jsx("span",{className:"text-red-500",children:")"}),e.jsx("span",{className:"text-yellow-500",children:" × "}),"Rp ",a.basic_salary.toLocaleString("id-ID"),e.jsx("br",{}),e.jsxs("span",{className:"text-blue-500",children:["Rp ",a.total_basic_salary.toLocaleString("id-ID")]})]})]}),e.jsxs(n,{children:[e.jsx(t,{children:"Total Gaji Lembur"}),e.jsx(t,{children:":"}),e.jsxs(t,{className:"text-sm/7",children:["Total Jam Lembur",e.jsx("span",{className:"text-yellow-500",children:" × "}),"Uang Lembur Per Jam",e.jsx("br",{}),a.total_overtime_hours," jam",e.jsx("span",{className:"text-yellow-500",children:" × "}),"Rp ",a.hourly_overtime_pay.toLocaleString("id-ID"),e.jsx("br",{}),e.jsxs("span",{className:"text-blue-500",children:["Rp ",a.total_overtime_pay.toLocaleString("id-ID")]})]})]}),e.jsxs(n,{children:[e.jsx(t,{children:"Total Bonus Tepat Waktu"}),e.jsx(t,{children:":"}),e.jsxs(t,{className:"text-sm/7",children:["Total Tepat Waktu",e.jsx("span",{className:"text-yellow-500",children:" × "}),"Bonus Tepat Waktu Harian",e.jsx("br",{}),a.total_punctual_days," hari",e.jsx("span",{className:"text-yellow-500",children:" × "}),"Rp ",a.bonus_amount.toLocaleString("id-ID"),e.jsx("br",{}),e.jsxs("span",{className:"text-blue-500",children:["Rp ",a.total_bonus.toLocaleString("id-ID")]})]})]}),e.jsxs(n,{children:[e.jsx(t,{children:"Total Potongan Telat"}),e.jsx(t,{children:":"}),e.jsxs(t,{className:"text-sm/7",children:["Total Telat",e.jsx("span",{className:"text-yellow-500",children:" × "}),"Potongan Telat Harian",e.jsx("br",{}),a.total_late_days," hari",e.jsx("span",{className:"text-yellow-500",children:" × "}),"Rp ",a.penalty_amount.toLocaleString("id-ID"),e.jsx("br",{}),e.jsxs("span",{className:"text-blue-500",children:["Rp ",a.total_penalty.toLocaleString("id-ID")]})]})]}),e.jsxs(n,{children:[e.jsx(t,{children:"Total Gaji Kotor"}),e.jsx(t,{children:":"}),e.jsxs(t,{children:["Total Gaji Pokok",e.jsx("span",{className:"text-yellow-500",children:" + "}),"Total Gaji Lembur",e.jsx("span",{className:"text-yellow-500",children:" + "}),"Tunjangan Transportasi",e.jsx("span",{className:"text-yellow-500",children:" + "}),"Total Bonus Tepat Waktu",e.jsx("span",{className:"text-yellow-500",children:" - "}),"Total Potongan Telat",e.jsx("br",{}),"Rp ",a.total_basic_salary.toLocaleString("id-ID"),e.jsx("span",{className:"text-yellow-500",children:" + "}),"Rp ",a.total_overtime_pay.toLocaleString("id-ID"),e.jsx("span",{className:"text-yellow-500",children:" + "}),"Rp ",a.transportation_allowance.toLocaleString("id-ID"),e.jsx("span",{className:"text-yellow-500",children:" + "}),"Rp ",a.total_bonus.toLocaleString("id-ID"),e.jsx("span",{className:"text-yellow-500",children:" - "}),"Rp ",a.total_penalty.toLocaleString("id-ID"),e.jsx("br",{}),e.jsxs("span",{className:"text-blue-500",children:["Rp ",a.gross_salary.toLocaleString("id-ID")]})]})]}),e.jsxs(n,{children:[e.jsx(t,{children:"Total Potongan"}),e.jsx(t,{children:":"}),e.jsxs(t,{className:"text-sm/7",children:["BPJS Kesehatan",e.jsx("span",{className:"text-yellow-500",children:" + "}),"BPJS Ketenagakerjaan",e.jsx("span",{className:"text-yellow-500",children:" + "}),"Pajak Penghasilan",e.jsx("br",{}),a.bpjs_health_percent," %",e.jsx("span",{className:"text-yellow-500",children:" + "}),a.bpjs_employment_percent," %",e.jsx("span",{className:"text-yellow-500",children:" + "}),a.income_tax_percent," %",e.jsx("br",{}),a.total_deduction_percent," %",e.jsx("br",{}),e.jsxs("span",{className:"text-blue-500",children:["Rp ",a.total_deductions.toLocaleString("id-ID")]})]})]}),e.jsxs(n,{children:[e.jsx(t,{children:"Total Gaji Bersih"}),e.jsx(t,{children:":"}),e.jsxs(t,{children:["Total Gaji Kotor",e.jsx("span",{className:"text-yellow-500",children:" - "}),"Total Potongan Dalam Bentuk Rupiah",e.jsx("br",{}),"Rp ",a.gross_salary.toLocaleString("id-ID"),e.jsx("span",{className:"text-yellow-500",children:" - "}),"Rp ",a.total_deductions.toLocaleString("id-ID"),e.jsx("br",{}),e.jsxs("span",{className:"text-blue-500",children:["Rp ",a.net_salary.toLocaleString("id-ID")]})]})]}),e.jsxs(n,{children:[e.jsx(t,{children:"Status"}),e.jsx(t,{children:":"}),e.jsx(t,{children:e.jsx(o,{className:m[a.salary_status][1],children:m[a.salary_status][0]})})]}),e.jsxs(n,{children:[e.jsx(t,{children:"Konfirmasi Gaji"}),e.jsx(t,{children:":"}),e.jsx(t,{children:e.jsx(o,{className:p[a.confirmation_status][1],children:p[a.confirmation_status][0]})})]})]})})})]})}export{le as default};
