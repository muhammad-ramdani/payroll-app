import{m as b,j as e,L as x}from"./app-yxEi3xJe.js";import{B as j}from"./app-logo-icon-CXNx6eOd.js";import{L as r,I as u}from"./label-mh3emZtT.js";import{A as g,t as v}from"./app-layout-BmWLcPuv.js";const m=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s),f=s=>parseInt(s.replace(/\D/g,""))||0;function B({attendanceRuleSettings:s}){const{data:n,setData:c,patch:h,processing:o,recentlySuccessful:_}=b({attendanceRules:s.map(a=>({id:a.id,punctual_end:a.punctual_end,late_threshold:a.late_threshold})),bonus_penalty:{id:s[0].attendance_bonus_penalty_setting.id,bonus_amount:s[0].attendance_bonus_penalty_setting.bonus_amount,penalty_amount:s[0].attendance_bonus_penalty_setting.penalty_amount}}),y=a=>{a.preventDefault(),h(route("aturan-presensi.update"),{onSuccess:()=>v.success("Aturan presensi berhasil diubah",{action:{label:"Tutup",onClick:()=>{}}})})},d=(a,t,l)=>{const i=[...n.attendanceRules];i[a]={...i[a],[t]:l},c("attendanceRules",i)},p=(a,t)=>{c("bonus_penalty",{...n.bonus_penalty,[a]:f(t)})};return e.jsxs(g,{breadcrumbs:[{title:"Aturan Presensi",href:"/"}],children:[e.jsx(x,{title:"Aturan Presensi"}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:y,className:"space-y-8",children:[n.attendanceRules.map((a,t)=>e.jsx("div",{children:e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{children:["Batas Tepat Waktu shift ",s[t].shift_type]}),e.jsx(u,{type:"time",value:a.punctual_end,onChange:l=>d(t,"punctual_end",l.target.value),className:"block",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{children:["Batas Terlambat shift ",s[t].shift_type]}),e.jsx(u,{type:"time",value:a.late_threshold,onChange:l=>d(t,"late_threshold",l.target.value),className:"block",required:!0})]})]})},a.id)),e.jsx("div",{children:e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Bonus Tepat Waktu"}),e.jsx(u,{value:m(n.bonus_penalty.bonus_amount),onChange:a=>p("bonus_amount",a.target.value),maxLength:9})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Denda Terlambat"}),e.jsx(u,{value:m(n.bonus_penalty.penalty_amount),onChange:a=>p("penalty_amount",a.target.value),maxLength:9})]})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(j,{type:"submit",disabled:o,children:o?"Menyimpan...":"Simpan"}),_&&e.jsx("div",{className:"text-muted-foreground",children:"Tersimpan"})]})]})})]})}export{B as default};
